---
title: "StreetEvents updates"
author: "Ian Gow"
date: "May 3, 2016"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## StreetEvents update

It looks like the files all come from 2015.

```{r data_step, warning=FALSE, message=FALSE}
library(dplyr)
library(ggplot2)

pg <- src_postgres(host="iangow.me")

calls <- tbl(pg, sql("SELECT * FROM streetevents.calls"))
speaker_data <- tbl(pg, sql("SELECT * FROM streetevents.speaker_data"))
call_files<- tbl(pg, sql("SELECT * FROM streetevents.call_files"))
```

```{r most_recent}
calls %>%
    filter(file_path ~ 'Apr2016') %>%
    select(last_update) 
```

## Histograph of `call_date`

```{r call_date}
calls %>%
    filter(file_path ~ 'Apr2016') %>%
    as.data.frame() %>%
    ggplot(aes(x=call_date)) +
    geom_histogram(binwidth=24*60*60)
```

## Histograph of `last_update`

```{r last_update}
calls %>%
    filter(file_path ~ 'Apr2016') %>%
    as.data.frame() %>%
    ggplot(aes(x=last_update)) +
    geom_histogram(binwidth=24*60*60)
```

## Histograph of `mtime`

```{r mtime}
call_files %>%
    filter(file_path ~ 'Apr2016') %>%
    as.data.frame() %>%
    ggplot(aes(x=mtime)) +
    geom_histogram(binwidth=24*60*60)
```
